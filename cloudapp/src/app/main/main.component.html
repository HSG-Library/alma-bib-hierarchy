<div *ngIf="entities$ | async as entities">
  <ng-container
                *ngIf="entities.length > 0; then entitylist; else noentities"></ng-container>
  <ng-template #noentities>
    <h1>no-entities</h1>
    <input>
  </ng-template>

  <ng-template #entitylist>
    <div class="eca-actions">
      <button mat-flat-button color="secondary" (click)="clear()" [disabled]="!selectedEntity">Clear</button>
    </div>
    <h1>Entities</h1>
    <mat-card [style.display]="apiResult1 ? '' : 'none'">
      <mat-card-header>
        <mat-card-title>API Result</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <textarea #apiResult1Area [value]="apiResult1 | json"></textarea>
        <div *ngIf="resultCount">Results: {{resultCount}}</div>
        <textarea #apiResult2Area [value]="apiResult2 | json"></textarea>
      </mat-card-content>
    </mat-card>
    <mat-card [style.display]="selectedEntity ? '' : 'none'">
      <mat-card-header>
        <mat-card-title>Selected Entity</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <pre>{{selectedEntity | json}}</pre>
      </mat-card-content>
    </mat-card>
    <label id="entities-radio-group-label">Select an entity:</label>
    <mat-radio-group
                     aria-labelledby="entities-radio-group-label"
                     class="entities-radio-group"
                     [(ngModel)]="selectedEntity"
                     (change)="entitySelected($event)">
      <mat-radio-button *ngFor="let entity of entities" [value]="entity">
        {{entity.description}}
      </mat-radio-button>
    </mat-radio-group>
  </ng-template>
</div>
<div class="loading-shade" *ngIf="loader.isLoading | async">
  <mat-spinner diameter="50" [mode]="loader.mode | async" [value]="loader.progress | async"></mat-spinner>
</div>
